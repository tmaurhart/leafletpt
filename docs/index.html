<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Leaflet - Prototype</title>
    <meta name="author" content="Sascha Popp, Thomas Maurhart">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link href="manifest.webmanifest" rel="manifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#2b3e51">
    <meta name="msapplication-TileColor" content="#2b3e51">
    <meta name="theme-color" content="#2b3e51">
    
    <link href="css/leaflet.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

    <script src="js/leaflet.js"></script>
    <script src="https://rawgithub.com/mylen/leaflet.TileLayer.WMTS/master/leaflet-tilelayer-wmts.js"></script>
    

</head>

<body>
    
    <div id="mapid"></div>
    <div id="debug"></div>
    
    <script>
        

        /*Geolocation.watchPosition().subscribe((position) => {
                this.x = position.coords.longitude;
                this.y = position.coords.latitude;*/

        //navigator.geolocation.getCurrentPosition(function (location) {
        navigator.geolocation.watchPosition(function (location) {
            var mymap = new L.Map('mapid');
            mymap.setZoom(11);
            var latlng = new L.LatLng(location.coords.latitude, location.coords.longitude);

            var positionOptions = {
                timeout: Infinity,
                maximumAge: 0,
                enableHighAccuracy: true
            }

            //var mymap = L.map('mapid').setView(latlng, 13);
            mymap.setView(latlng, 18);

            /*L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
                attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
                maxZoom: 18,
                id: 'mapbox.streets',
                accessToken: 'pk.eyJ1IjoidG1hdXJoYXJ0IiwiYSI6ImNqd245anpudzBiemE0NG53NnUxbTU2ZW0ifQ.ynEQUwdgBGAE9BQOzuz5HQ'
            }).addTo(mymap);*/

            //http://{s}.wien.gv.at/basemap/geolandbasemap/normal/google3857/{z}/{y}/{x}.png

            /*L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
                attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://mapbox.com">Mapbox</a>',
                maxZoom: 18,
                id: 'mapbox.streets',
                accessToken: 'pk.eyJ1IjoiYmJyb29rMTU0IiwiYSI6ImNpcXN3dnJrdDAwMGNmd250bjhvZXpnbWsifQ.Nf9Zkfchos577IanoKMoYQ'
            }).addTo(mymap);*/

            var ign = new L.tileLayer("https://{s}.wien.gv.at/basemap/bmaporthofoto30cm/normal/google3857/{z}/{y}/{x}.jpeg", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: '&copy; <a href="http://basemap.at">Basemap.at</a>, Sascha & Tom',
                maxNativeZoom: 19,
                maxZoom: 18
            });

            mymap.addLayer(ign);

            var marker = L.marker(latlng).addTo(mymap);
        }, positionOptions);



    </script>

</body>

</html>